{% if journals %}
<div class="overflow-x-auto border border-gray-300 rounded-lg p-4 bg-white shadow-sm">
    <table class="w-full border border-gray-300 border-collapse">

        <thead>
            <tr class="bg-green-700 text-white">
                <th class="border border-gray-300 py-3 px-4">#</th>
                <th class="border border-gray-300 py-3 px-4">User</th>
                <th class="border border-gray-300 py-3 px-4">Topic</th>
                <th class="border border-gray-300 py-3 px-4">Journal Title</th>
                <th class="border border-gray-300 py-3 px-4">Description</th>
                <th class="border border-gray-300 py-3 px-4">Status</th>
                <th class="border border-gray-300 py-3 px-4">Created At</th>
                <th class="border border-gray-300 py-3 px-4 text-center">Actions</th>
            </tr>
        </thead>

        <tbody>
            {% for j in journals %}
            <tr class="hover:bg-gray-100">

                <td class="border border-gray-300 py-3 px-4">{{ forloop.counter }}</td>

                <td class="border border-gray-300 py-3 px-4 font-medium">
                    {{ j.user.name }}
                </td>

                <td class="border border-gray-300 py-3 px-4">
                    {{ j.topic.name }}
                </td>

                <td class="border border-gray-300 py-3 px-4">
                    {{ j.name }}
                </td>

                <td class="border border-gray-300 py-3 px-4 max-w-xs">
                    {{ j.description }}
                </td>

                <td class="border border-gray-300 py-3 px-4">
                    {% if j.status == 'Published' %}
                        <span class="bg-green-600 text-white px-3 py-1 rounded-md text-sm">Published</span>
                    {% elif j.status == 'rejected' %}
                        <span class="bg-red-600 text-white px-3 py-1 rounded-md text-sm">Rejected</span>
                    {% else %}
                        <span class="bg-gray-500 text-white px-3 py-1 rounded-md text-sm">Pending</span>
                    {% endif %}
                </td>

                <td class="border border-gray-300 py-3 px-4">
                    {{ j.created_at|date:"Y-m-d H:i" }}
                </td>

                <!-- ACTIONS -->
                <td class="border border-gray-300 py-3 px-4 text-center">
                    <div class="flex justify-center gap-3">

                        <!-- Pending → Approve + Reject -->
                        {% if j.status == "draft" %}
                            <a href="{% url 'approve_journal' j.id %}"
                               class="bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded-md text-sm">
                                Approve
                            </a>
                            <a href="{% url 'reject_journal' j.id %}"
                               onclick="return confirm('Reject this journal?');"
                               class="bg-red-600 hover:bg-red-700 text-white px-4 py-1.5 rounded-md text-sm">
                                Reject
                            </a>

                        <!-- Approved → Reject -->
                        {% elif j.status == "Published" %}
                            <a href="{% url 'reject_journal' j.id %}"
                               onclick="return confirm('Move this Approved journal to Rejected?');"
                               class="bg-red-600 hover:bg-red-700 text-white px-4 py-1.5 rounded-md text-sm">
                                Reject
                            </a>

                        <!-- Rejected → Approve -->
                        {% elif j.status == "rejected" %}
                            <a href="{% url 'approve_journal' j.id %}"
                               class="bg-green-600 hover:bg-green-700 text-white px-4 py-1.5 rounded-md text-sm">
                                Approve
                            </a>
                        {% endif %}

                    </div>
                </td>

            </tr>
            {% endfor %}
        </tbody>

    </table>
</div>
{% else %}
<p class="text-center text-black-500 mt-4">No journals found.</p>
{% endif %}
